webpackJsonp([3],{169:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(170),s=n.n(a),r=n(17),o=n(181),i=n(191),c=(n.n(i),n(192)),u=n(225),l=n(227),d=n(228),f=n(230);r.a.config.productionTip=!1,r.a.use(l.a),r.a.use(f.c),r.a.component("my-header",f.a),r.a.component("my-icon",f.b),s()(d).forEach(function(t){r.a.filter(t,d[t])}),Object(i.sync)(c.a,u.a),new r.a({router:u.a,store:c.a,template:"<App/>",components:{App:o.a}}).$mount("#app")},181:function(t,e,n){"use strict";function a(t){n(182)}var s=n(184),r=n(190),o=n(10),i=a,c=o(s.a,r.a,!1,i,null,null);e.a=c.exports},182:function(t,e){},184:function(t,e,n){"use strict";var a=n(168),s=n.n(a),r=n(29);e.a={name:"app",computed:s()({},Object(r.b)({global:"getGlobal"}))}},190:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),t._v(" "),n("div",{staticClass:"vue-toast-manager_container"},[n("transition-group",{attrs:{name:"toast",tag:"div"}},t._l(t.global.toast,function(e){return n("div",{key:e.id,staticClass:"vue-toast_container "},[n("div",{staticClass:"vue-toast_message"},[n("span",[t._v(t._s(e.text))])])])}))],1)],1)},s=[],r={render:a,staticRenderFns:s};e.a=r},192:function(t,e,n){"use strict";var a=n(29),s=n(17),r=n(193),o=n(194),i=n(224);s.a.use(a.a),e.a=new a.a.Store({modules:{global:r.a,book:o.a,note:i.a}})},193:function(t,e,n){"use strict";var a=0,s={toast:[]},r={getGlobal:function(t){return t}},o={toast:function(t,e){var n=t.commit,s=a+1;a+=1,n("addToast",{id:s,text:e}),setTimeout(function(){return n("removeToast",s)},2e3)}},i={addToast:function(t,e){t.toast.push(e)},removeToast:function(t,e){t.toast=t.toast.filter(function(t){return t.id!==e})}};e.a={state:s,getters:r,actions:o,mutations:i}},194:function(t,e,n){"use strict";var a=n(19),s=n.n(a),r=n(30),o=n.n(r),i=n(31),c=n.n(i),u=n(48),l={list:[]},d={getBooks:function(t){return t.list.reverse()}},f={getBooks:function(t){var e=this,n=t.commit;t.state;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.books.toArray();case 2:a=t.sent,n("updateBooks",a);case 4:case"end":return t.stop()}},t,e)}))()},addBook:function(t,e){var n=this,a=t.commit;t.state,t.dispatch;return new s.a(function(){var t=c()(o.a.mark(function t(s,r){var i,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(new Date).getTime(),t.next=3,u.a.books.add({title:e,date:i});case 3:c=t.sent,a("addBooks",{id:c,title:e,date:i}),s();case 6:case"end":return t.stop()}},t,n)}));return function(e,n){return t.apply(this,arguments)}}())},delBook:function(t,e){var n=this,a=(t.commit,t.state,t.dispatch);return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.books.delete(e);case 2:return a("getBooks"),t.next=5,u.a.category.where("bookId").equals(e).delete();case 5:return t.next=7,u.a.notes.where("bookId").equals(e).delete();case 7:case"end":return t.stop()}},t,n)}))()}},p={updateBooks:function(t,e){t.list=e},addBooks:function(t,e){t.list.push(e)}};e.a={state:l,getters:d,actions:f,mutations:p}},224:function(t,e,n){"use strict";var a=n(30),s=n.n(a),r=n(31),o=n.n(r),i=n(19),c=n.n(i),u=n(48),l={detail:null,category:{current:null,type:0,data:[]},note:{currentId:0,currentContent:"",data:[]}},d={noteDetail:function(t){return t.detail},getCategory:function(t){return t.category},getNotes:function(t){return t.note},getNoteContent:function(t){return t.note.currentContent}},f={getDetail:function(t){var e=this,n=t.commit,a=t.rootState.route;return new c.a(function(){var t=o()(s.a.mark(function t(r,o){var i,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=parseInt(a.params.id,10),t.next=3,u.a.books.get(i);case 3:c=t.sent,n("updateDetail",c),r(c);case 6:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}())},getCategory:function(t){var e=this,n=t.commit,a=t.state,r=t.dispatch,i=t.rootState.route;return o()(s.a.mark(function t(){var o,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=parseInt(i.params.id,10),t.next=3,u.a.category.where("bookId").equals(o).filter(function(t){return t.type===a.category.type}).toArray();case 3:c=t.sent,n("updateCategory",c),c.length>0?n("updateCurrent",c[0]):n("updateCurrent",null),r("getNotes");case 7:case"end":return t.stop()}},t,e)}))()},addCategory:function(t,e){var n=this,a=t.commit,r=t.state,i=t.dispatch,l=t.rootState.route;return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new c.a(function(){var t=o()(s.a.mark(function t(o,c){var d,f,p;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=parseInt(l.params.id,10),t.next=3,u.a.category.add({title:e,type:r.category.type,bookId:d});case 3:f=t.sent,p={id:f,title:e,type:r.category.type,bookId:d},a("updateCurrent",p),a("addCategory",p),i("getNotes"),o();case 9:case"end":return t.stop()}},t,n)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,n)}))()},getNotes:function(t){var e=this,n=t.commit,a=t.state;return o()(s.a.mark(function t(){var r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.category.current){t.next=3;break}return n("updateNotes",[]),t.abrupt("return",!1);case 3:return r=a.category.current.id,t.next=6,u.a.notes.where("catId").equals(r).toArray();case 6:o=t.sent,n("updateNotes",o);case 8:case"end":return t.stop()}},t,e)}))()},addNote:function(t){var e=this,n=(t.commit,t.state),a=t.dispatch,r=t.rootState.route;return new c.a(function(){var t=o()(s.a.mark(function t(o,i){var c,l,d,f;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=n.category.current.id,l=n.note.currentContent,d=parseInt(r.params.id,10),f=u.a.notes.add({catId:c,content:l,bookId:d}),a("getNotes"),o(f);case 6:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}())},editNote:function(t){var e=this,n=(t.commit,t.state),a=t.dispatch;return new c.a(function(){var t=o()(s.a.mark(function t(r,o){var i,c,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.note.currentId,c=n.note.currentContent,t.next=4,u.a.notes.update(i,{content:c});case 4:l=t.sent,l&&a("getNotes"),r();case 7:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}())},delNote:function(t,e){var n=this,a=(t.commit,t.state,t.dispatch);return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.notes.delete(e);case 2:a("getNotes");case 3:case"end":return t.stop()}},t,n)}))()},delCate:function(t,e){var n=this,a=t.commit,r=t.state,i=t.dispatch;return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.category.delete(e);case 2:return i("getCategory"),r.category.data.length>0?a("updateCategory",r.category.data[0]):a("updateCategory",null),t.next=6,u.a.notes.where("catId").equals(e).delete();case 6:case"end":return t.stop()}},t,n)}))()}},p={updateDetail:function(t,e){t.detail=e},updateNoteType:function(t,e){t.category.type=e},updateCategory:function(t,e){t.category.data=e},addCategory:function(t,e){t.category.data.push(e)},updateCurrent:function(t,e){t.category.current=e},updateNotes:function(t,e){t.note.data=e},updateNoteContent:function(t,e){t.note.currentContent=e},updateNoteId:function(t,e){t.note.currentId=e}};e.a={state:l,getters:d,actions:f,mutations:p}},225:function(t,e,n){"use strict";var a=n(17),s=n(226);a.a.use(s.a),e.a=new s.a({routes:[{path:"/",name:"Home",component:function(){return n.e(1).then(n.bind(null,252))}},{path:"/node/:id",name:"Note",component:function(){return n.e(0).then(n.bind(null,253))}}]})},227:function(t,e,n){"use strict";var a=n(39),s=n.n(a),r=!1,o=0,i=null,c=null,u={start:null,move:null,end:null},l={proxyid:0,proxies:[],trigger:function(t,e,n){var a=void 0,s={bubbles:!0,cancelable:!0,detail:n||{}};try{a=new CustomEvent(e,s),t&&t.dispatchEvent(a,s)}catch(t){console.warn("It is not supported by environment.")}},bind:function(t,e,n,a){t.listeners=t.listeners||{},t.modifiers=t.modifiers||a,t.listeners[e]?t.listeners[e].push(n):t.listeners[e]=[n];var s=function(e){n&&n.call(null,e.detail.originEvent),t.modifiers&&t.modifiers.prevent&&e.preventDefault(),t.modifiers&&t.modifiers.stop&&e.stopPropagation()};t.listeners[e]&&t.addEventListener(e,s,!1)},unbind:function(t,e){var n=t.listeners[e];n&&n.length&&n.forEach(function(n){t.removeEventListener(e,n,!1)})}},d={holdTime:650,tapMaxDistance:10,tapTime:200},f={PCevts:{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},hasTouch:"ontouchstart"in window,getDistance:function(t,e){var n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)},getPosOfEvent:function(t){if(this.hasTouch){for(var e=[],n=null,a=0,s=t.touches.length;a<s;a++)n=t.touches[a],e.push({x:n.pageX,y:n.pageY});return e}return[{x:t.pageX,y:t.pageY}]},getFingers:function(t){return t.touches?t.touches.length:1},reset:function(){i=null,u={start:null,move:null,end:null}}},p=null,v=null,m=!1,h=0,j=null,g={tap:function(t){var e=t.target,n=Date.now(),a=n-o;console.log(u.start[0]);var s=f.getDistance(u.start[0],u.move?u.move[0]:u.start[0]);if(clearTimeout(p),d.tapMaxDistance<s)return!1;d.holdTime>a&&f.getFingers(t)<=1&&(m=!0,h=n,j=u.start[0],v=setTimeout(function(){l.trigger(e,"tap",{type:"tap",originEvent:t,fingersCount:f.getFingers(t),position:j},d.tapTime)}))},hold:function(t){var e=t.target;clearTimeout(p),p=setTimeout(function(){if(!u.start)return!1;var n=f.getDistance(u.start[0],u.move?u.move[0]:u.start[0]);if(d.tapMaxDistance<n)return!1;l.trigger(e,"hold",{type:"hold",originEvent:t,fingersCount:f.getFingers(t),position:u.start[0]})},d.holdTime)}},y=function(t){t.target;switch(t.type){case"touchstart":case"mousedown":r=!0,u.start||(u.start=f.getPosOfEvent(t)),o=Date.now(),i=t,g.hold(t);break;case"touchmove":case"mousemove":if(!r||!u.start)return!1;u.move=f.getPosOfEvent(t);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!r)return!1;c=t,g.tap(t),f.reset(),t.touches&&1===t.touches.length&&(r=!0)}},w={init:function(){(f.hasTouch?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout").split(" ").forEach(function(t){document.addEventListener(t,y,!1)})},install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=s()(d,e),this.init(),t.directive("tap",{isFn:!0,acceptStatement:!0,bind:function(t,e){l.bind(t,"tap",e.value,e.modifiers)},unbind:function(t,e){l.unbind(t,"tap",e.value)}}),t.directive("hold",{isFn:!0,acceptStatement:!0,bind:function(t,e){t.ontouchstart=function(t){t.preventDefault()},l.bind(t,"hold",e.value,e.modifiers)},unbind:function(t,e){l.unbind(t,"hold",e.value)}})}};e.a=w},228:function(t,e,n){"use strict";function a(t){return o()(t).format("MMMM Do YYYY, h:mm:ss a")}function s(t){return t.replace(/\n/g,"<br />")}Object.defineProperty(e,"__esModule",{value:!0}),e.momentTime=a,e.htmlFormate=s;var r=n(0),o=n.n(r);o.a.locale("zh-cn")},229:function(t,e,n){function a(t){return n(s(t))}function s(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var r={"./af":50,"./af.js":50,"./ar":51,"./ar-dz":52,"./ar-dz.js":52,"./ar-kw":53,"./ar-kw.js":53,"./ar-ly":54,"./ar-ly.js":54,"./ar-ma":55,"./ar-ma.js":55,"./ar-sa":56,"./ar-sa.js":56,"./ar-tn":57,"./ar-tn.js":57,"./ar.js":51,"./az":58,"./az.js":58,"./be":59,"./be.js":59,"./bg":60,"./bg.js":60,"./bm":61,"./bm.js":61,"./bn":62,"./bn.js":62,"./bo":63,"./bo.js":63,"./br":64,"./br.js":64,"./bs":65,"./bs.js":65,"./ca":66,"./ca.js":66,"./cs":67,"./cs.js":67,"./cv":68,"./cv.js":68,"./cy":69,"./cy.js":69,"./da":70,"./da.js":70,"./de":71,"./de-at":72,"./de-at.js":72,"./de-ch":73,"./de-ch.js":73,"./de.js":71,"./dv":74,"./dv.js":74,"./el":75,"./el.js":75,"./en-au":76,"./en-au.js":76,"./en-ca":77,"./en-ca.js":77,"./en-gb":78,"./en-gb.js":78,"./en-ie":79,"./en-ie.js":79,"./en-nz":80,"./en-nz.js":80,"./eo":81,"./eo.js":81,"./es":82,"./es-do":83,"./es-do.js":83,"./es-us":84,"./es-us.js":84,"./es.js":82,"./et":85,"./et.js":85,"./eu":86,"./eu.js":86,"./fa":87,"./fa.js":87,"./fi":88,"./fi.js":88,"./fo":89,"./fo.js":89,"./fr":90,"./fr-ca":91,"./fr-ca.js":91,"./fr-ch":92,"./fr-ch.js":92,"./fr.js":90,"./fy":93,"./fy.js":93,"./gd":94,"./gd.js":94,"./gl":95,"./gl.js":95,"./gom-latn":96,"./gom-latn.js":96,"./gu":97,"./gu.js":97,"./he":98,"./he.js":98,"./hi":99,"./hi.js":99,"./hr":100,"./hr.js":100,"./hu":101,"./hu.js":101,"./hy-am":102,"./hy-am.js":102,"./id":103,"./id.js":103,"./is":104,"./is.js":104,"./it":105,"./it.js":105,"./ja":106,"./ja.js":106,"./jv":107,"./jv.js":107,"./ka":108,"./ka.js":108,"./kk":109,"./kk.js":109,"./km":110,"./km.js":110,"./kn":111,"./kn.js":111,"./ko":112,"./ko.js":112,"./ky":113,"./ky.js":113,"./lb":114,"./lb.js":114,"./lo":115,"./lo.js":115,"./lt":116,"./lt.js":116,"./lv":117,"./lv.js":117,"./me":118,"./me.js":118,"./mi":119,"./mi.js":119,"./mk":120,"./mk.js":120,"./ml":121,"./ml.js":121,"./mr":122,"./mr.js":122,"./ms":123,"./ms-my":124,"./ms-my.js":124,"./ms.js":123,"./my":125,"./my.js":125,"./nb":126,"./nb.js":126,"./ne":127,"./ne.js":127,"./nl":128,"./nl-be":129,"./nl-be.js":129,"./nl.js":128,"./nn":130,"./nn.js":130,"./pa-in":131,"./pa-in.js":131,"./pl":132,"./pl.js":132,"./pt":133,"./pt-br":134,"./pt-br.js":134,"./pt.js":133,"./ro":135,"./ro.js":135,"./ru":136,"./ru.js":136,"./sd":137,"./sd.js":137,"./se":138,"./se.js":138,"./si":139,"./si.js":139,"./sk":140,"./sk.js":140,"./sl":141,"./sl.js":141,"./sq":142,"./sq.js":142,"./sr":143,"./sr-cyrl":144,"./sr-cyrl.js":144,"./sr.js":143,"./ss":145,"./ss.js":145,"./sv":146,"./sv.js":146,"./sw":147,"./sw.js":147,"./ta":148,"./ta.js":148,"./te":149,"./te.js":149,"./tet":150,"./tet.js":150,"./th":151,"./th.js":151,"./tl-ph":152,"./tl-ph.js":152,"./tlh":153,"./tlh.js":153,"./tr":154,"./tr.js":154,"./tzl":155,"./tzl.js":155,"./tzm":156,"./tzm-latn":157,"./tzm-latn.js":157,"./tzm.js":156,"./uk":158,"./uk.js":158,"./ur":159,"./ur.js":159,"./uz":160,"./uz-latn":161,"./uz-latn.js":161,"./uz.js":160,"./vi":162,"./vi.js":162,"./x-pseudo":163,"./x-pseudo.js":163,"./yo":164,"./yo.js":164,"./zh-cn":165,"./zh-cn.js":165,"./zh-hk":166,"./zh-hk.js":166,"./zh-tw":167,"./zh-tw.js":167};a.keys=function(){return Object.keys(r)},a.resolve=s,t.exports=a,a.id=229},230:function(t,e,n){"use strict";var a=n(231),s=n(236),r=(n(241),n(243));n.d(e,"a",function(){return a.a}),n.d(e,"b",function(){return s.a}),n.d(e,"c",function(){return r.a})},231:function(t,e,n){"use strict";var a=n(232);e.a=a.a},232:function(t,e,n){"use strict";function a(t){n(233)}var s=n(234),r=n(235),o=n(10),i=a,c=o(s.a,r.a,!1,i,"data-v-ceead34a",null);e.a=c.exports},233:function(t,e){},234:function(t,e,n){"use strict";e.a={props:{title:{type:String,default:""}}}},235:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-wrap"},[n("header",{staticClass:"g-header"},[n("div",{staticClass:"g-header-left"},[t._t("left")],2),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"g-header-right"},[t._t("right")],2)])])},s=[],r={render:a,staticRenderFns:s};e.a=r},236:function(t,e,n){"use strict";var a=n(237);e.a=a.a},237:function(t,e,n){"use strict";function a(t){n(238)}var s=n(239),r=n(240),o=n(10),i=a,c=o(s.a,r.a,!1,i,null,null);e.a=c.exports},238:function(t,e){},239:function(t,e,n){"use strict";e.a={props:["icon","className"],computed:{iconClass:function(){var t=this.icon,e=this.className;return e?"icon icon-"+t+" "+e:"icon icon-"+t}}}},240:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:t.iconClass},[n("use",{attrs:{"xlink:href":"#icon-"+t.icon}})])},s=[],r={render:a,staticRenderFns:s};e.a=r},241:function(t,e,n){"use strict";var a=n(242),s=n.n(a),r=function(t){t.prototype.$toast=s.a};s.a.install=r;s.a},242:function(t,e){},243:function(t,e,n){"use strict";var a=n(19),s=n.n(a),r=n(17),o=n(244),i=n(249),c=n.n(i),u=void 0,l={},d=r.a.extend(o.a),f=function(){u=new d({el:document.createElement("div")}),document.body.appendChild(u.$el)},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(),e.content=t,c()(u.$data,l),c()(u.$data,e),new s.a(function(t,e){u.show=!0,Array.prototype.slice.call(document.querySelectorAll("input")).forEach(function(t){t.blur()});var n=u.success,a=u.cancel;u.success=function(){n(),t("ok")},u.cancel=function(){a(),e(new Error("cancel"))}})};e.a={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l=e,t.prototype.$confirm=p}}},244:function(t,e,n){"use strict";function a(t){n(245)}var s=n(246),r=n(248),o=n(10),i=a,c=o(s.a,r.a,!1,i,"data-v-57c54423",null);e.a=c.exports},245:function(t,e){},246:function(t,e,n){"use strict";var a=n(247);e.a={mixins:[a.a],data:function(){return{show:!1,title:"提示",content:"",style:{},yes:{text:"确定",style:{}},no:{text:"取消",style:{}}}},methods:{success:function(){this.show=!1},cancel:function(){this.show=!1}}}},247:function(t,e,n){"use strict";e.a={mounted:function(){var t=this,e=function(){t.show=!1};window.addEventListener("hashchange",e),window.addEventListener("popstate",e),window.addEventListener("pagehide",e)}}},248:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"wc"}},[t.show?n("div",{staticClass:"wc"},[n("div",{staticClass:"wc-popup wc-popup-in"},[n("div",{staticClass:"wc-popup-inner"},[t.title?n("div",{staticClass:"wc-popup-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"wc-popup-text"},[t._v(t._s(t.content))])]),t._v(" "),n("div",{staticClass:"wc-popup-buttons"},[n("span",{staticClass:"wc-popup-button",on:{click:t.success}},[t._v(t._s(t.yes.text))]),t._v(" "),n("span",{staticClass:"wc-popup-button",on:{click:t.cancel}},[t._v(t._s(t.no.text))])])])]):t._e()])},s=[],r={render:a,staticRenderFns:s};e.a=r},48:function(t,e,n){"use strict";var a=n(223),s=new a.a("BookNotes");s.version(1).stores({books:"++id, title, date",category:"++id, title, type, bookId",notes:"++id, content, catId, bookId"}),e.a=s}},[169]);